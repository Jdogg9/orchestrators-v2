# ORCHESTRATORS_V2 production template
# Copy to .env.production and rotate secrets.

ORCH_ENV=production
ORCH_PORT=8088
ORCH_HOST=0.0.0.0
ORCH_ENABLE_API=1

# Auth (required in production)
ORCH_REQUIRE_BEARER=1
ORCH_BEARER_TOKEN=rotate_me_32_chars_min

# Provider (local-first)
ORCH_LLM_ENABLED=1
ORCH_LLM_PROVIDER=ollama
ORCH_OLLAMA_URL=http://ollama:11434
ORCH_MODEL_CHAT=qwen2.5:3b
ORCH_MODEL_TOOL=qwen2.5:3b
ORCH_MODEL_EMBED=nomic-embed-text:latest
ORCH_LLM_TIMEOUT_SEC=30
ORCH_LLM_HEALTH_TIMEOUT_SEC=5
ORCH_MODEL_REASONER=qwen2.5:3b

# Memory (opt-in)
ORCH_MEMORY_ENABLED=0
ORCH_MEMORY_CAPTURE_ENABLED=0
ORCH_MEMORY_WRITE_POLICY=off
ORCH_MEMORY_CAPTURE_TTL_MINUTES=180
ORCH_MEMORY_DB_PATH=instance/orchestrator_core.db
ORCH_MEMORY_SCRUB_REDACT_PII=1

# Persistence (Postgres default in production)
ORCH_DATABASE_URL=postgresql+psycopg://orch:orch@postgres:5432/orch
ORCH_DB_POOL_RECYCLE=300

# SQLite WAL (for fallback/local only)
ORCH_SQLITE_WAL_ENABLED=1

# Rate limiting (Redis-backed required in production)
ORCH_RATE_LIMIT_ENABLED=1
ORCH_RATE_LIMIT=120 per minute
ORCH_RATE_LIMIT_STORAGE_URL=redis://redis:6379/0

# Logging + metrics
ORCH_LOG_JSON=1
ORCH_LOG_LEVEL=INFO
ORCH_METRICS_ENABLED=1

# Tooling + sandbox
ORCH_TOOL_WEB_SEARCH_ENABLED=0
ORCH_TOOL_SANDBOX_ENABLED=1
ORCH_TOOL_SANDBOX_REQUIRED=1
ORCH_TOOL_SANDBOX_FALLBACK=0
ORCH_SANDBOX_IMAGE=orchestrators-v2:full
ORCH_SANDBOX_TIMEOUT_SEC=10
ORCH_SANDBOX_MEMORY_MB=256
ORCH_SANDBOX_CPU=0.5
ORCH_SANDBOX_TOOL_DIR=sandbox_tools

# Orchestrator mode
ORCH_ORCHESTRATOR_MODE=advanced
ORCH_ROUTER_POLICY_PATH=config/router_policy.yaml

# Semantic router
ORCH_SEMANTIC_ROUTER_ENABLED=0
ORCH_SEMANTIC_ROUTER_MIN_SIMILARITY=0.80
ORCH_SEMANTIC_ROUTER_EMBED_MODEL=nomic-embed-text:latest
ORCH_SEMANTIC_ROUTER_OLLAMA_URL=http://ollama:11434
ORCH_SEMANTIC_ROUTER_TIMEOUT_SEC=10

# Intent router
ORCH_INTENT_ROUTER_ENABLED=0
ORCH_INTENT_ROUTER_SHADOW=0
ORCH_INTENT_DECISION_EXPOSE=0
ORCH_INTENT_MIN_CONFIDENCE=0.85
ORCH_INTENT_MIN_GAP=0.05
ORCH_INTENT_CACHE_ENABLED=1
ORCH_INTENT_CACHE_DB_PATH=instance/intent_cache.db
ORCH_INTENT_CACHE_TTL_SEC=600
ORCH_INTENT_HITL_ENABLED=1
ORCH_INTENT_HITL_DB_PATH=instance/hitl_queue.db

# OpenTelemetry
ORCH_OTEL_ENABLED=1
ORCH_OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4318/v1/traces
ORCH_SERVICE_NAME=orchestrators-v2